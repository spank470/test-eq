{"uid":"65bbcb280441a8aa","name":"3 - yandex","fullName":"tests.test_compare#test_compare_html_yandex","historyId":"d5aa8861bf6b57e395524e74ac9301d7","time":{"start":1744796277623,"stop":1744796277998,"duration":375},"description":"Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.","descriptionHtml":"<p>Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.</p>\n","status":"failed","statusMessage":"AssertionError: HTML ответы отличаются!\nassert '<!doctype ht...alt=\"\"></div>' == '<!doctype ht.../body></html>'\n  + <!doctype html><html prefix=\"og: http://ogp.me/ns#\" lang=\"ru\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/a6/a6a296b741b51880ae8a9b04a67cfe3f.png\" sizes=\"16x16\">\n  +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f4/f47b1b3d8194c36ce660324ab55a04fe.png\" sizes=\"32x32\">\n  +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f0/f0597b6727cc67dceebc4e3a87caf571.png\" sizes=\"192x192\">\n  + ...\n  \n  ...Full output truncated (17 lines hidden), use '-vv' to show","statusTrace":"self = <test_compare.TestCompareHTML object at 0x0000025A8C19BFE0>\n\n    @allure.title(\"3 - yandex\")\n    @allure.description(\"Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.\")\n    def test_compare_html_yandex(self):\n        url_ref = \"http://yandex.ru\"\n        url_target = \"http://google.com\"\n    \n        with allure.step(f\"GET запрос к REF: {url_ref}\"):\n            ref = requests.get(url_ref)\n            allure.attach(ref.text, name=\"REF Response\", attachment_type=allure.attachment_type.TEXT)\n            assert ref.status_code == 200\n    \n        with allure.step(f\"GET запрос к TARGET: {url_target}\"):\n            target = requests.get(url_target)\n            allure.attach(target.text, name=\"TARGET Response\", attachment_type=allure.attachment_type.TEXT)\n            assert target.status_code == 200\n    \n        with allure.step(\"Сравнение HTML содержимого\"):\n>           assert ref.text == target.text, \"HTML ответы отличаются!\"\nE           AssertionError: HTML ответы отличаются!\nE           assert '<!doctype ht...alt=\"\"></div>' == '<!doctype ht.../body></html>'\nE             + <!doctype html><html prefix=\"og: http://ogp.me/ns#\" lang=\"ru\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\nE             +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/a6/a6a296b741b51880ae8a9b04a67cfe3f.png\" sizes=\"16x16\">\nE             +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f4/f47b1b3d8194c36ce660324ab55a04fe.png\" sizes=\"32x32\">\nE             +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f0/f0597b6727cc67dceebc4e3a87caf571.png\" sizes=\"192x192\">\nE             + ...\nE             \nE             ...Full output truncated (17 lines hidden), use '-vv' to show\n\ntests\\test_compare.py:62: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_fail_for_invalid_template_variable","time":{"start":1744796276781,"stop":1744796276781,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"django_test_environment","time":{"start":1744796276781,"stop":1744796276781,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_django_setup_unittest","time":{"start":1744796276782,"stop":1744796276782,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"django_db_blocker","time":{"start":1744796276782,"stop":1744796276782,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_dj_autoclear_mailbox","time":{"start":1744796277622,"stop":1744796277622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_template_string_if_invalid_marker","time":{"start":1744796277622,"stop":1744796277622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_live_server_helper","time":{"start":1744796277622,"stop":1744796277622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_django_set_urlconf","time":{"start":1744796277622,"stop":1744796277622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_django_clear_site_cache","time":{"start":1744796277622,"stop":1744796277622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_django_db_marker","time":{"start":1744796277622,"stop":1744796277622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"description":"Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.","status":"failed","statusMessage":"AssertionError: HTML ответы отличаются!\nassert '<!doctype ht...alt=\"\"></div>' == '<!doctype ht.../body></html>'\n  + <!doctype html><html prefix=\"og: http://ogp.me/ns#\" lang=\"ru\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/a6/a6a296b741b51880ae8a9b04a67cfe3f.png\" sizes=\"16x16\">\n  +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f4/f47b1b3d8194c36ce660324ab55a04fe.png\" sizes=\"32x32\">\n  +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f0/f0597b6727cc67dceebc4e3a87caf571.png\" sizes=\"192x192\">\n  + ...\n  \n  ...Full output truncated (17 lines hidden), use '-vv' to show","statusTrace":"self = <test_compare.TestCompareHTML object at 0x0000025A8C19BFE0>\n\n    @allure.title(\"3 - yandex\")\n    @allure.description(\"Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.\")\n    def test_compare_html_yandex(self):\n        url_ref = \"http://yandex.ru\"\n        url_target = \"http://google.com\"\n    \n        with allure.step(f\"GET запрос к REF: {url_ref}\"):\n            ref = requests.get(url_ref)\n            allure.attach(ref.text, name=\"REF Response\", attachment_type=allure.attachment_type.TEXT)\n            assert ref.status_code == 200\n    \n        with allure.step(f\"GET запрос к TARGET: {url_target}\"):\n            target = requests.get(url_target)\n            allure.attach(target.text, name=\"TARGET Response\", attachment_type=allure.attachment_type.TEXT)\n            assert target.status_code == 200\n    \n        with allure.step(\"Сравнение HTML содержимого\"):\n>           assert ref.text == target.text, \"HTML ответы отличаются!\"\nE           AssertionError: HTML ответы отличаются!\nE           assert '<!doctype ht...alt=\"\"></div>' == '<!doctype ht.../body></html>'\nE             + <!doctype html><html prefix=\"og: http://ogp.me/ns#\" lang=\"ru\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\nE             +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/a6/a6a296b741b51880ae8a9b04a67cfe3f.png\" sizes=\"16x16\">\nE             +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f4/f47b1b3d8194c36ce660324ab55a04fe.png\" sizes=\"32x32\">\nE             +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f0/f0597b6727cc67dceebc4e3a87caf571.png\" sizes=\"192x192\">\nE             + ...\nE             \nE             ...Full output truncated (17 lines hidden), use '-vv' to show\n\ntests\\test_compare.py:62: AssertionError","steps":[{"name":"GET запрос к REF: http://yandex.ru","time":{"start":1744796277623,"stop":1744796277806,"duration":183},"status":"passed","steps":[],"attachments":[{"uid":"cc2d03422d4296e3","name":"REF Response","source":"cc2d03422d4296e3.txt","type":"text/plain","size":14471}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true},{"name":"GET запрос к TARGET: http://google.com","time":{"start":1744796277806,"stop":1744796277992,"duration":186},"status":"passed","steps":[],"attachments":[{"uid":"7d62d7dbac8c712e","name":"TARGET Response","source":"7d62d7dbac8c712e.txt","type":"text/plain","size":19619}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true},{"name":"Сравнение HTML содержимого","time":{"start":1744796277992,"stop":1744796277997,"duration":5},"status":"failed","statusMessage":"AssertionError: HTML ответы отличаются!\nassert '<!doctype ht...alt=\"\"></div>' == '<!doctype ht.../body></html>'\n  + <!doctype html><html prefix=\"og: http://ogp.me/ns#\" lang=\"ru\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/a6/a6a296b741b51880ae8a9b04a67cfe3f.png\" sizes=\"16x16\">\n  +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f4/f47b1b3d8194c36ce660324ab55a04fe.png\" sizes=\"32x32\">\n  +     <link rel=\"icon\" href=\"https://yastatic.net/s3/home-static/_/f0/f0597b6727cc67dceebc4e3a87caf571.png\" sizes=\"192x192\">\n  + ...\n  \n  ...Full output truncated (17 lines hidden), use '-vv' to show\n","statusTrace":"  File \"D:\\Github\\el-o4\\test-eq\\tests\\test_compare.py\", line 62, in test_compare_html_yandex\n    assert ref.text == target.text, \"HTML ответы отличаются!\"\n    \n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":2,"hasContent":true},"afterStages":[{"name":"_django_setup_unittest::0","time":{"start":1744796278007,"stop":1744796278007,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"suite","value":"Сравнение HTML-ответов с двух серверов"},{"name":"parentSuite","value":"tests"},{"name":"subSuite","value":"TestCompareHTML"},{"name":"host","value":"DESKTOP-7H4UQS5"},{"name":"thread","value":"12828-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_compare"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"65bbcb280441a8aa.json","parameterValues":[]}