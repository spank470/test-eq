{"uid":"982ed8a59324d729","name":"2 - google","fullName":"tests.test_compare#test_compare_html_google","historyId":"bafbfb4ef194bfcbd342c25cc5d05b8b","time":{"start":1744870911767,"stop":1744870912098,"duration":331},"description":"Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.","descriptionHtml":"<p>Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.</p>\n","status":"failed","statusMessage":"AssertionError: HTML ответы отличаются!\nassert '<!DOCTYPE ht...y>\\n</html>\\n' == '<!doctype ht.../body></html>'\n  - <!doctype html><html itemscope=\"\" itemtype=\"http://schema.org/WebPage\" lang=\"ru\"><head><meta content=\"&#1055;&#1086;&#1080;&#1089;&#1082; &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1080; &#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1085;&#1077;&#1090;&#1077;: &#1074;&#1077;&#1073; &#1089;&#1090;&#1088;&#1072;&#1085;&#1080;&#1094;&#1099;, &#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080;, &#1074;&#1080;&#1076;&#1077;&#1086; &#1080; &#1084;&#1085;&#1086;&#1075;&#1086;&#1077; &#1076;&#1088;&#1091;&#1075;&#1086;&#1077;.\" name=\"description\"><me...\n  \n  ...Full output truncated (53 lines hidden), use '-vv' to show","statusTrace":"self = <test_compare.TestCompareHTML object at 0x000002920C4475C0>\n\n    @allure.title(\"2 - google\")\n    @allure.description(\"Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.\")\n    def test_compare_html_google(self):\n        url_ref = \"http://webtours.load-test.ru:1090/cgi-bin/nav.pl?in=home\"\n        url_target = \"http://google.com\"\n    \n        with allure.step(f\"GET запрос к REF: {url_ref}\"):\n            ref = requests.get(url_ref)\n            allure.attach(ref.text, name=\"REF Response\", attachment_type=allure.attachment_type.TEXT)\n            assert ref.status_code == 200\n    \n        with allure.step(f\"GET запрос к TARGET: {url_target}\"):\n            target = requests.get(url_target)\n            allure.attach(target.text, name=\"TARGET Response\", attachment_type=allure.attachment_type.TEXT)\n            assert target.status_code == 200\n    \n        with allure.step(\"Сравнение HTML содержимого\"):\n>           assert ref.text == target.text, \"HTML ответы отличаются!\"\nE           AssertionError: HTML ответы отличаются!\nE           assert '<!DOCTYPE ht...y>\\n</html>\\n' == '<!doctype ht.../body></html>'\nE             - <!doctype html><html itemscope=\"\" itemtype=\"http://schema.org/WebPage\" lang=\"ru\"><head><meta content=\"&#1055;&#1086;&#1080;&#1089;&#1082; &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1080; &#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1085;&#1077;&#1090;&#1077;: &#1074;&#1077;&#1073; &#1089;&#1090;&#1088;&#1072;&#1085;&#1080;&#1094;&#1099;, &#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080;, &#1074;&#1080;&#1076;&#1077;&#1086; &#1080; &#1084;&#1085;&#1086;&#1075;&#1086;&#1077; &#1076;&#1088;&#1091;&#1075;&#1086;&#1077;.\" name=\"description\"><me...\nE             \nE             ...Full output truncated (53 lines hidden), use '-vv' to show\n\ntests\\test_compare.py:43: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"django_db_blocker","time":{"start":1744870911547,"stop":1744870911547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_fail_for_invalid_template_variable","time":{"start":1744870911547,"stop":1744870911547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_django_setup_unittest","time":{"start":1744870911547,"stop":1744870911547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"django_test_environment","time":{"start":1744870911547,"stop":1744870911547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_dj_autoclear_mailbox","time":{"start":1744870911766,"stop":1744870911766,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_template_string_if_invalid_marker","time":{"start":1744870911766,"stop":1744870911766,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_django_clear_site_cache","time":{"start":1744870911766,"stop":1744870911766,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_django_db_marker","time":{"start":1744870911766,"stop":1744870911766,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_live_server_helper","time":{"start":1744870911766,"stop":1744870911766,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"_django_set_urlconf","time":{"start":1744870911766,"stop":1744870911766,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"description":"Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.","status":"failed","statusMessage":"AssertionError: HTML ответы отличаются!\nassert '<!DOCTYPE ht...y>\\n</html>\\n' == '<!doctype ht.../body></html>'\n  - <!doctype html><html itemscope=\"\" itemtype=\"http://schema.org/WebPage\" lang=\"ru\"><head><meta content=\"&#1055;&#1086;&#1080;&#1089;&#1082; &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1080; &#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1085;&#1077;&#1090;&#1077;: &#1074;&#1077;&#1073; &#1089;&#1090;&#1088;&#1072;&#1085;&#1080;&#1094;&#1099;, &#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080;, &#1074;&#1080;&#1076;&#1077;&#1086; &#1080; &#1084;&#1085;&#1086;&#1075;&#1086;&#1077; &#1076;&#1088;&#1091;&#1075;&#1086;&#1077;.\" name=\"description\"><me...\n  \n  ...Full output truncated (53 lines hidden), use '-vv' to show","statusTrace":"self = <test_compare.TestCompareHTML object at 0x000002920C4475C0>\n\n    @allure.title(\"2 - google\")\n    @allure.description(\"Проверяем, что страницы REF и TARGET возвращают одинаковый HTML и статус код 200.\")\n    def test_compare_html_google(self):\n        url_ref = \"http://webtours.load-test.ru:1090/cgi-bin/nav.pl?in=home\"\n        url_target = \"http://google.com\"\n    \n        with allure.step(f\"GET запрос к REF: {url_ref}\"):\n            ref = requests.get(url_ref)\n            allure.attach(ref.text, name=\"REF Response\", attachment_type=allure.attachment_type.TEXT)\n            assert ref.status_code == 200\n    \n        with allure.step(f\"GET запрос к TARGET: {url_target}\"):\n            target = requests.get(url_target)\n            allure.attach(target.text, name=\"TARGET Response\", attachment_type=allure.attachment_type.TEXT)\n            assert target.status_code == 200\n    \n        with allure.step(\"Сравнение HTML содержимого\"):\n>           assert ref.text == target.text, \"HTML ответы отличаются!\"\nE           AssertionError: HTML ответы отличаются!\nE           assert '<!DOCTYPE ht...y>\\n</html>\\n' == '<!doctype ht.../body></html>'\nE             - <!doctype html><html itemscope=\"\" itemtype=\"http://schema.org/WebPage\" lang=\"ru\"><head><meta content=\"&#1055;&#1086;&#1080;&#1089;&#1082; &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1080; &#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1085;&#1077;&#1090;&#1077;: &#1074;&#1077;&#1073; &#1089;&#1090;&#1088;&#1072;&#1085;&#1080;&#1094;&#1099;, &#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080;, &#1074;&#1080;&#1076;&#1077;&#1086; &#1080; &#1084;&#1085;&#1086;&#1075;&#1086;&#1077; &#1076;&#1088;&#1091;&#1075;&#1086;&#1077;.\" name=\"description\"><me...\nE             \nE             ...Full output truncated (53 lines hidden), use '-vv' to show\n\ntests\\test_compare.py:43: AssertionError","steps":[{"name":"GET запрос к REF: http://webtours.load-test.ru:1090/cgi-bin/nav.pl?in=home","time":{"start":1744870911767,"stop":1744870911838,"duration":71},"status":"passed","steps":[],"attachments":[{"uid":"c7359ecf5892dd53","name":"REF Response","source":"c7359ecf5892dd53.txt","type":"text/plain","size":1449}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true},{"name":"GET запрос к TARGET: http://google.com","time":{"start":1744870911838,"stop":1744870912092,"duration":254},"status":"passed","steps":[],"attachments":[{"uid":"1b5623856dcaceda","name":"TARGET Response","source":"1b5623856dcaceda.txt","type":"text/plain","size":19656}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true},{"name":"Сравнение HTML содержимого","time":{"start":1744870912093,"stop":1744870912094,"duration":1},"status":"failed","statusMessage":"AssertionError: HTML ответы отличаются!\nassert '<!DOCTYPE ht...y>\\n</html>\\n' == '<!doctype ht.../body></html>'\n  - <!doctype html><html itemscope=\"\" itemtype=\"http://schema.org/WebPage\" lang=\"ru\"><head><meta content=\"&#1055;&#1086;&#1080;&#1089;&#1082; &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1080; &#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1085;&#1077;&#1090;&#1077;: &#1074;&#1077;&#1073; &#1089;&#1090;&#1088;&#1072;&#1085;&#1080;&#1094;&#1099;, &#1082;&#1072;&#1088;&#1090;&#1080;&#1085;&#1082;&#1080;, &#1074;&#1080;&#1076;&#1077;&#1086; &#1080; &#1084;&#1085;&#1086;&#1075;&#1086;&#1077; &#1076;&#1088;&#1091;&#1075;&#1086;&#1077;.\" name=\"description\"><me...\n  \n  ...Full output truncated (53 lines hidden), use '-vv' to show\n","statusTrace":"  File \"D:\\Github\\el-o4\\test-eq\\tests\\test_compare.py\", line 43, in test_compare_html_google\n    assert ref.text == target.text, \"HTML ответы отличаются!\"\n    \n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":2,"hasContent":true},"afterStages":[{"name":"_django_setup_unittest::0","time":{"start":1744870914042,"stop":1744870914042,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"suite","value":"Сравнение HTML-ответов с двух серверов"},{"name":"parentSuite","value":"tests"},{"name":"subSuite","value":"TestCompareHTML"},{"name":"host","value":"DESKTOP-7H4UQS5"},{"name":"thread","value":"19328-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_compare"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"982ed8a59324d729.json","parameterValues":[]}